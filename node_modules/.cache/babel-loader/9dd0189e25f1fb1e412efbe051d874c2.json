{"remainingRequest":"/Users/yangjiahao/Desktop/ygapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!/Users/yangjiahao/Desktop/ygapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!/Users/yangjiahao/Desktop/ygapp/node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!/Users/yangjiahao/Desktop/ygapp/src/views/manager/order/Confirm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yangjiahao/Desktop/ygapp/src/views/manager/order/Confirm.vue","mtime":1578403502324},{"path":"/Users/yangjiahao/Desktop/ygapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yangjiahao/Desktop/ygapp/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yangjiahao/Desktop/ygapp/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yangjiahao/Desktop/ygapp/node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2giOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIi9Vc2Vycy95YW5namlhaGFvL0Rlc2t0b3AveWdhcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKCmZ1bmN0aW9uIG93bktleXMob2JqZWN0LCBlbnVtZXJhYmxlT25seSkgeyB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzeW1ib2xzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpOyBpZiAoZW51bWVyYWJsZU9ubHkpIHN5bWJvbHMgPSBzeW1ib2xzLmZpbHRlcihmdW5jdGlvbiAoc3ltKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iamVjdCwgc3ltKS5lbnVtZXJhYmxlOyB9KTsga2V5cy5wdXNoLmFwcGx5KGtleXMsIHN5bWJvbHMpOyB9IHJldHVybiBrZXlzOyB9CgpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldICE9IG51bGwgPyBhcmd1bWVudHNbaV0gOiB7fTsgaWYgKGkgJSAyKSB7IG93bktleXMoT2JqZWN0KHNvdXJjZSksIHRydWUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyBfZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHNvdXJjZVtrZXldKTsgfSk7IH0gZWxzZSBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMpIHsgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyhzb3VyY2UpKTsgfSBlbHNlIHsgb3duS2V5cyhPYmplY3Qoc291cmNlKSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2UsIGtleSkpOyB9KTsgfSB9IHJldHVybiB0YXJnZXQ7IH0KCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IGdldCwgcG9zdF9vYmpfYXJyYXkgfSBmcm9tICcuLi8uLi8uLi9odHRwL2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhZGRyZXNzSWQ6IDAsCiAgICAgIC8vIOacjeWKoeWcsOWdgGlkCiAgICAgIGFkZHJlc3NlczogW10sCiAgICAgIG9yZGVyTGluZXM6IFtdCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIC8vIOWcqOmhtemdouWKoOi9veeahOaXtuWAmeafpeivouWcsOWdgOS/oeaBrwogICAgdGhpcy5sb2FkQWRkcmVzcygpOyAvLyDliJ3lp4vljJborqLljZXpobnvvIjlsIbmiJHku6zotK3kubDnmoTkuqflk4HmlL7lhaXliLDotK3nianovabvvIkKCiAgICB2YXIgb3JkZXJMaW5lID0gewogICAgICBudW1iZXI6IDEsCiAgICAgIHByaWNlOiB0aGlzLiRyb3V0ZS5xdWVyeS5wcmljZSwKICAgICAgcHJvZHVjdElkOiB0aGlzLiRyb3V0ZS5xdWVyeS5pZAogICAgfTsKICAgIHRoaXMub3JkZXJMaW5lcy5wdXNoKG9yZGVyTGluZSk7CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoInVzZXIiLCBbImluZm8iXSksIHsKICAgIC8vIFt7aWQ6MSxwcm92aW5jZTon5bGx6KW/55yBJyxjaXR5OiLmmYvkuK3luIIifSx7aWQ6MSxwcm92aW5jZTon5rGf6IuP55yBJyxjaXR5OiLmmIblsbHluIIifV0gPeOAiyBbe3RleHQ6IuWxseilv+ecgeaZi+S4reW4giIsdmFsdWU6MX1dCiAgICBvcHRpb25zOiBmdW5jdGlvbiBvcHRpb25zKCkgewogICAgICAvLyDlsIZhZGRyZXNzZXPnmoTmlbDmja7orqHnrpfkuLrkuIDkuKrmlrDnmoTmlbDnu4Tov5Tlm54KICAgICAgcmV0dXJuIHRoaXMuYWRkcmVzc2VzLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICB0ZXh0OiBpdGVtLnByb3ZpbmNlICsgIiAiICsgaXRlbS5jaXR5ICsgIiAiICsgaXRlbS5hcmVhICsgIiAiICsgaXRlbS5hZGRyZXNzLAogICAgICAgICAgdmFsdWU6IGl0ZW0uaWQKICAgICAgICB9OwogICAgICB9KTsKICAgIH0KICB9KSwKICBtZXRob2RzOiB7CiAgICAvLyDmj5DkuqTorqLljZUKICAgIHN1Ym1pdEhhbmRsZXI6IGZ1bmN0aW9uIHN1Ym1pdEhhbmRsZXIoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgdXJsID0gIi9vcmRlci9zYXZlIjsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgY3VzdG9tZXJJZDogdGhpcy5pbmZvLmlkLAogICAgICAgIGFkZHJlc3NJZDogdGhpcy5hZGRyZXNzSWQsCiAgICAgICAgb3JkZXJMaW5lczogdGhpcy5vcmRlckxpbmVzCiAgICAgIH07IC8vIGNvbnNvbGUubG9nKGRhdGEpOwoKICAgICAgcG9zdF9vYmpfYXJyYXkodXJsLCBkYXRhKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLiR0b2FzdCgi5o+Q5Lqk5oiQ5YqfIik7CgogICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgiL21hbmFnZXIvb3JkZXIiKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8g5p+l6K+i5Zyw5Z2A5L+h5oGvCiAgICBsb2FkQWRkcmVzczogZnVuY3Rpb24gbG9hZEFkZHJlc3MoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdmFyIGlkID0gdGhpcy5pbmZvLmlkOwogICAgICB2YXIgdXJsID0gIi9hZGRyZXNzL2ZpbmRCeUN1c3RvbWVySWQ/aWQ9IiArIGlkOwogICAgICBnZXQodXJsKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIC8vIOWwhuafpeivouWIsOeahOWcsOWdgOS/oeaBr+e7keWumuWIsGFkZHJlc3Pov5nkuKrlj5jph4/kuK0KICAgICAgICBfdGhpczIuYWRkcmVzc2VzID0gcmVzcG9uc2UuZGF0YTsgLy8g5bCG5p+l6K+i5Yiw55qE5Zyw5Z2A5YiX6KGo5Lit56ys5LiA5Liq5Zyw5Z2A55qEaWTotYvlgLznu5lkYXRh5LitYWRkcmVzc0lkLOihqOekuum7mOiupOWcsOWdgAoKICAgICAgICBfdGhpczIuYWRkcmVzc0lkID0gX3RoaXMyLmFkZHJlc3Nlc1swXS5pZDsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Confirm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoBA,SAAA,QAAA,QAAA,MAAA;AACA,SAAA,GAAA,EAAA,cAAA,QAAA,qBAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,CADA;AACA;AACA,MAAA,SAAA,EAAA,EAFA;AAGA,MAAA,UAAA,EAAA;AAHA,KAAA;AAKA,GAPA;AAQA,EAAA,OARA,qBAQA;AACA;AACA,SAAA,WAAA,GAFA,CAGA;;AACA,QAAA,SAAA,GAAA;AACA,MAAA,MAAA,EAAA,CADA;AAEA,MAAA,KAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA,KAFA;AAGA,MAAA,SAAA,EAAA,KAAA,MAAA,CAAA,KAAA,CAAA;AAHA,KAAA;AAKA,SAAA,UAAA,CAAA,IAAA,CAAA,SAAA;AACA,GAlBA;AAmBA,EAAA,QAAA,oBAEA,QAAA,CAAA,MAAA,EAAA,CAAA,MAAA,CAAA,CAFA;AAGA;AACA,IAAA,OAAA,EAAA,mBAAA;AACA;AACA,aAAA,KAAA,SAAA,CAAA,GAAA,CAAA,UAAA,IAAA,EAAA;AACA,eAAA;AACA,UAAA,IAAA,EAAA,IAAA,CAAA,QAAA,GAAA,GAAA,GAAA,IAAA,CAAA,IAAA,GAAA,GAAA,GAAA,IAAA,CAAA,IAAA,GAAA,GAAA,GAAA,IAAA,CAAA,OADA;AAEA,UAAA,KAAA,EAAA,IAAA,CAAA;AAFA,SAAA;AAIA,OALA,CAAA;AAMA;AAZA,IAnBA;AAiCA,EAAA,OAAA,EAAA;AACA;AACA,IAAA,aAFA,2BAEA;AAAA;;AACA,UAAA,GAAA,GAAA,aAAA;AACA,UAAA,IAAA,GAAA;AACA,QAAA,UAAA,EAAA,KAAA,IAAA,CAAA,EADA;AAEA,QAAA,SAAA,EAAA,KAAA,SAFA;AAGA,QAAA,UAAA,EAAA,KAAA;AAHA,OAAA,CAFA,CAOA;;AACA,MAAA,cAAA,CAAA,GAAA,EAAA,IAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,MAAA;;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,gBAAA;AACA,OAHA;AAIA,KAdA;AAeA;AACA,IAAA,WAhBA,yBAgBA;AAAA;;AACA,UAAA,EAAA,GAAA,KAAA,IAAA,CAAA,EAAA;AACA,UAAA,GAAA,GAAA,kCAAA,EAAA;AACA,MAAA,GAAA,CAAA,GAAA,CAAA,CAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA;AACA,QAAA,MAAA,CAAA,SAAA,GAAA,QAAA,CAAA,IAAA,CAFA,CAGA;;AACA,QAAA,MAAA,CAAA,SAAA,GAAA,MAAA,CAAA,SAAA,CAAA,CAAA,EAAA,EAAA;AACA,OALA;AAMA;AAzBA;AAjCA,CAAA","sourcesContent":["<template>\n  <briup-fulllayout title=\"订单确认\">\n    服务地址:\n    <van-dropdown-menu>\n      <van-dropdown-item v-model=\"addressId\" :options=\"options\" />\n    </van-dropdown-menu>\n    订单详情:\n    <div style=\"padding:0 2em\">\n      <p>服务名称：{{$route.query.name}}</p>\n      <p>服务简介：{{$route.query.description}}</p>\n      <p>服务价格：{{$route.query.price}}</p>\n      <p>服务数量：1</p>\n      <p>服务小计：{{$route.query.price * 1}}</p>\n    </div>\n    <div style=\"position:fixed;bottom:0;width:100%;\">\n      <van-button @click=\"submitHandler\" block type=\"primary\">提交订单</van-button>\n    </div>\n  </briup-fulllayout>\n</template>\n<script>\nimport { mapState } from 'vuex'\nimport {get,post_obj_array} from '../../../http/axios'\nexport default {\n  data(){\n    return {\n      addressId:0,    // 服务地址id\n      addresses:[],\n      orderLines:[]\n    }\n  },\n  created(){\n    // 在页面加载的时候查询地址信息\n    this.loadAddress();\n    // 初始化订单项（将我们购买的产品放入到购物车）\n    let orderLine = {\n      number:1,\n      price:this.$route.query.price,\n      productId:this.$route.query.id\n    };\n    this.orderLines.push(orderLine);\n  },\n  computed:{\n    // 映射info信息\n    ...mapState(\"user\",[\"info\"]),\n    // [{id:1,province:'山西省',city:\"晋中市\"},{id:1,province:'江苏省',city:\"昆山市\"}] =》 [{text:\"山西省晋中市\",value:1}]\n    options:function(){\n      // 将addresses的数据计算为一个新的数组返回\n      return this.addresses.map(item=>{\n        return {\n          text:item.province+\" \"+item.city+\" \"+item.area+\" \"+item.address,\n          value:item.id\n        }\n      })\n    }\n  },\n  methods:{\n    // 提交订单\n    submitHandler(){\n      let url = \"/order/save\";\n      let data = {\n        customerId:this.info.id,\n        addressId: this.addressId,\n        orderLines:this.orderLines\n      }\n      // console.log(data);\n      post_obj_array(url,data).then(response =>{\n        this.$toast(\"提交成功\");\n        this.$router.push(\"/manager/order\")\n      })\n    },\n    // 查询地址信息\n    loadAddress(){\n      let id = this.info.id;  \n      let url = \"/address/findByCustomerId?id=\"+id;\n      get(url).then((response)=>{\n        // 将查询到的地址信息绑定到address这个变量中\n        this.addresses = response.data;\n        // 将查询到的地址列表中第一个地址的id赋值给data中addressId,表示默认地址\n        this.addressId = this.addresses[0].id;\n      })\n    }\n  }\n}\n</script>"],"sourceRoot":"src/views/manager/order"}]}