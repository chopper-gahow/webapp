{"remainingRequest":"/Users/yangjiahao/Desktop/code/more/vue-app/node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!/Users/yangjiahao/Desktop/code/more/vue-app/src/views/manager/order/Confirm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/yangjiahao/Desktop/code/more/vue-app/src/views/manager/order/Confirm.vue","mtime":1578403502324},{"path":"/Users/yangjiahao/Desktop/code/more/vue-app/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yangjiahao/Desktop/code/more/vue-app/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/yangjiahao/Desktop/code/more/vue-app/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/yangjiahao/Desktop/code/more/vue-app/node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCcKaW1wb3J0IHtnZXQscG9zdF9vYmpfYXJyYXl9IGZyb20gJy4uLy4uLy4uL2h0dHAvYXhpb3MnCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICBhZGRyZXNzSWQ6MCwgICAgLy8g5pyN5Yqh5Zyw5Z2AaWQKICAgICAgYWRkcmVzc2VzOltdLAogICAgICBvcmRlckxpbmVzOltdCiAgICB9CiAgfSwKICBjcmVhdGVkKCl7CiAgICAvLyDlnKjpobXpnaLliqDovb3nmoTml7blgJnmn6Xor6LlnLDlnYDkv6Hmga8KICAgIHRoaXMubG9hZEFkZHJlc3MoKTsKICAgIC8vIOWIneWni+WMluiuouWNlemhue+8iOWwhuaIkeS7rOi0reS5sOeahOS6p+WTgeaUvuWFpeWIsOi0reeJqei9pu+8iQogICAgbGV0IG9yZGVyTGluZSA9IHsKICAgICAgbnVtYmVyOjEsCiAgICAgIHByaWNlOnRoaXMuJHJvdXRlLnF1ZXJ5LnByaWNlLAogICAgICBwcm9kdWN0SWQ6dGhpcy4kcm91dGUucXVlcnkuaWQKICAgIH07CiAgICB0aGlzLm9yZGVyTGluZXMucHVzaChvcmRlckxpbmUpOwogIH0sCiAgY29tcHV0ZWQ6ewogICAgLy8g5pig5bCEaW5mb+S/oeaBrwogICAgLi4ubWFwU3RhdGUoInVzZXIiLFsiaW5mbyJdKSwKICAgIC8vIFt7aWQ6MSxwcm92aW5jZTon5bGx6KW/55yBJyxjaXR5OiLmmYvkuK3luIIifSx7aWQ6MSxwcm92aW5jZTon5rGf6IuP55yBJyxjaXR5OiLmmIblsbHluIIifV0gPeOAiyBbe3RleHQ6IuWxseilv+ecgeaZi+S4reW4giIsdmFsdWU6MX1dCiAgICBvcHRpb25zOmZ1bmN0aW9uKCl7CiAgICAgIC8vIOWwhmFkZHJlc3Nlc+eahOaVsOaNruiuoeeul+S4uuS4gOS4quaWsOeahOaVsOe7hOi/lOWbngogICAgICByZXR1cm4gdGhpcy5hZGRyZXNzZXMubWFwKGl0ZW09PnsKICAgICAgICByZXR1cm4gewogICAgICAgICAgdGV4dDppdGVtLnByb3ZpbmNlKyIgIitpdGVtLmNpdHkrIiAiK2l0ZW0uYXJlYSsiICIraXRlbS5hZGRyZXNzLAogICAgICAgICAgdmFsdWU6aXRlbS5pZAogICAgICAgIH0KICAgICAgfSkKICAgIH0KICB9LAogIG1ldGhvZHM6ewogICAgLy8g5o+Q5Lqk6K6i5Y2VCiAgICBzdWJtaXRIYW5kbGVyKCl7CiAgICAgIGxldCB1cmwgPSAiL29yZGVyL3NhdmUiOwogICAgICBsZXQgZGF0YSA9IHsKICAgICAgICBjdXN0b21lcklkOnRoaXMuaW5mby5pZCwKICAgICAgICBhZGRyZXNzSWQ6IHRoaXMuYWRkcmVzc0lkLAogICAgICAgIG9yZGVyTGluZXM6dGhpcy5vcmRlckxpbmVzCiAgICAgIH0KICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7CiAgICAgIHBvc3Rfb2JqX2FycmF5KHVybCxkYXRhKS50aGVuKHJlc3BvbnNlID0+ewogICAgICAgIHRoaXMuJHRvYXN0KCLmj5DkuqTmiJDlip8iKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL21hbmFnZXIvb3JkZXIiKQogICAgICB9KQogICAgfSwKICAgIC8vIOafpeivouWcsOWdgOS/oeaBrwogICAgbG9hZEFkZHJlc3MoKXsKICAgICAgbGV0IGlkID0gdGhpcy5pbmZvLmlkOyAgCiAgICAgIGxldCB1cmwgPSAiL2FkZHJlc3MvZmluZEJ5Q3VzdG9tZXJJZD9pZD0iK2lkOwogICAgICBnZXQodXJsKS50aGVuKChyZXNwb25zZSk9PnsKICAgICAgICAvLyDlsIbmn6Xor6LliLDnmoTlnLDlnYDkv6Hmga/nu5HlrprliLBhZGRyZXNz6L+Z5Liq5Y+Y6YeP5LitCiAgICAgICAgdGhpcy5hZGRyZXNzZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIC8vIOWwhuafpeivouWIsOeahOWcsOWdgOWIl+ihqOS4reesrOS4gOS4quWcsOWdgOeahGlk6LWL5YC857uZZGF0YeS4rWFkZHJlc3NJZCzooajnpLrpu5jorqTlnLDlnYAKICAgICAgICB0aGlzLmFkZHJlc3NJZCA9IHRoaXMuYWRkcmVzc2VzWzBdLmlkOwogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["Confirm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Confirm.vue","sourceRoot":"src/views/manager/order","sourcesContent":["<template>\n  <briup-fulllayout title=\"订单确认\">\n    服务地址:\n    <van-dropdown-menu>\n      <van-dropdown-item v-model=\"addressId\" :options=\"options\" />\n    </van-dropdown-menu>\n    订单详情:\n    <div style=\"padding:0 2em\">\n      <p>服务名称：{{$route.query.name}}</p>\n      <p>服务简介：{{$route.query.description}}</p>\n      <p>服务价格：{{$route.query.price}}</p>\n      <p>服务数量：1</p>\n      <p>服务小计：{{$route.query.price * 1}}</p>\n    </div>\n    <div style=\"position:fixed;bottom:0;width:100%;\">\n      <van-button @click=\"submitHandler\" block type=\"primary\">提交订单</van-button>\n    </div>\n  </briup-fulllayout>\n</template>\n<script>\nimport { mapState } from 'vuex'\nimport {get,post_obj_array} from '../../../http/axios'\nexport default {\n  data(){\n    return {\n      addressId:0,    // 服务地址id\n      addresses:[],\n      orderLines:[]\n    }\n  },\n  created(){\n    // 在页面加载的时候查询地址信息\n    this.loadAddress();\n    // 初始化订单项（将我们购买的产品放入到购物车）\n    let orderLine = {\n      number:1,\n      price:this.$route.query.price,\n      productId:this.$route.query.id\n    };\n    this.orderLines.push(orderLine);\n  },\n  computed:{\n    // 映射info信息\n    ...mapState(\"user\",[\"info\"]),\n    // [{id:1,province:'山西省',city:\"晋中市\"},{id:1,province:'江苏省',city:\"昆山市\"}] =》 [{text:\"山西省晋中市\",value:1}]\n    options:function(){\n      // 将addresses的数据计算为一个新的数组返回\n      return this.addresses.map(item=>{\n        return {\n          text:item.province+\" \"+item.city+\" \"+item.area+\" \"+item.address,\n          value:item.id\n        }\n      })\n    }\n  },\n  methods:{\n    // 提交订单\n    submitHandler(){\n      let url = \"/order/save\";\n      let data = {\n        customerId:this.info.id,\n        addressId: this.addressId,\n        orderLines:this.orderLines\n      }\n      // console.log(data);\n      post_obj_array(url,data).then(response =>{\n        this.$toast(\"提交成功\");\n        this.$router.push(\"/manager/order\")\n      })\n    },\n    // 查询地址信息\n    loadAddress(){\n      let id = this.info.id;  \n      let url = \"/address/findByCustomerId?id=\"+id;\n      get(url).then((response)=>{\n        // 将查询到的地址信息绑定到address这个变量中\n        this.addresses = response.data;\n        // 将查询到的地址列表中第一个地址的id赋值给data中addressId,表示默认地址\n        this.addressId = this.addresses[0].id;\n      })\n    }\n  }\n}\n</script>"]}]}